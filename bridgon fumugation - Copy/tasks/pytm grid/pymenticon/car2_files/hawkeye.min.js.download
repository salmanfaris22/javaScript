window.Hawkeye=function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,n){var r=n(4).default,o=n(3).default,i=new WeakMap;function a(){o.setPrivate(i,this,new r)}var s=new(Object.defineProperty(a.prototype,"configure",{get:function(){return o.getPrivate(i,this).configure},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"reconfigure",{get:function(){return o.getPrivate(i,this).reconfigure},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"trackEnd",{get:function(){return o.getPrivate(i,this).trackEnd},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"trackStart",{get:function(){return o.getPrivate(i,this).trackStart},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"log",{get:function(){return o.getPrivate(i,this).log},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"logAPI",{get:function(){return o.getPrivate(i,this).logAPI},enumerable:!0,configurable:!0}),a);e.exports=s},function(e,t){void 0!==window.requestIdleCallback&&(window.requestIdleCallback=function(e){return setTimeout(e,0)})},function(e,t){var n;window.requestIdleCallback=window.requestIdleCallback||function(e){return setTimeout(e,0)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)},"localStorage"in window||Object.defineProperty(window,"localStorage",{value:(n={},{getItem:function(e){return n[e]},setItem:function(e,t){n[e]=t}})})},function(e,t,n){"use strict";n.r(t);var r={setPrivate:function(e,t,n){e.set(t,n)},getPrivate:function(e,t){return e.get(t)}};t.default=r},function(e,t,n){"use strict";n.r(t);var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(i,a,s,u){return new(s=s||Promise)(function(e,t){function n(e){try{o(u.next(e))}catch(e){t(e)}}function r(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}o((u=u.apply(i,a||[])).next())})}function l(n,r){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function a(e){var t={};try{t=e&&JSON.parse(e)}catch(e){console.log("Error in store :",e)}return t||{}}function s(e){return!Object.keys(e).length}function u(e){var t=e.length,n=Math.ceil(.8*t),r=t-n;return e.substring(0,r)+"*".repeat(n)}function f(t){if(!t||"string"!=typeof t)return t;var e=t;try{e=(e=(e=(e=(e=e.replace(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,u)).replace(/(\+?\d{1,3}[- ]?)?\d{10}\b/g,u)).replace(/\b[A-Z]{5}\d{4}[A-Z]\b/g,u)).replace(/\b\d{10,16}\b/g,u)).replace(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\b/g,u)}catch(e){return t}return e}var g,d=function(e){return e?"object"==typeof e?JSON.stringify(e):e.toString():""},p="jsError",m="apiError",h="apiLog",v="localError",y="loadMetrics",b="pageNavigationTime",w="unhandledPromiseRejection",P="info",I="pageNavigationStart",L="pageNavigationEnd",T="pending",k={STAGING:"staging",PRODUCTION:"production",DEVELOPMENT:"development"},S="JSON",j="noJson",O="__hawkeye",E="events",C="complete",M=function(e,t){try{var n=a(localStorage.getItem(O)||"");n[e]=t,localStorage.setItem(O,d(n))}catch(e){console.warn("Not able to set items in localStorage. Error: ",e)}},A=function(e){try{var t=a(localStorage.getItem(O)||"");return Array.isArray(t[e])?t[e]:[]}catch(e){return console.warn("Not able to set items in localStorage. Error: ",e),[]}},N=function(n){return"object"==typeof n&&n&&s(n)?null:(Object.keys(n).forEach(function(e){if(e){var t=e;"object"==typeof n[t]?n[t]?(N(n[t]),s(n[t])&&delete n[t]):delete n[t]:function(t){return[null,void 0,""].some(function(e){return t===e})}(n[t])&&delete n[t]}}),n)},_=function(){return window.location.href},q=function(){return(new Date).toISOString()},R=window,V={options:[],header:[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,R.opera],dataos:[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],databrowser:[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}],init:function(){var e=this.header.join(" ");return{os:this.matchItem(e,this.dataos),browser:this.matchItem(e,this.databrowser)}},matchItem:function(e,t){var n,r,o,i=0,a=0;for(i=0;i<t.length;i+=1)if(new RegExp(t[i].value,"i").test(e)){if(n=new RegExp(t[i].version+"[- /:;]([\\d._]+)","i"),o="",(r=e.match(n))&&r[1]&&(r=r[1]),r){var s=r.split(/[._]+/);for(a=0;a<s.length;a+=1)o+=s[a],s[a+1]&&(o+=".")}else o="0";return{name:t[i].name,version:o}}return{name:"unknown",version:0}}}.init(),D={osType:V.os.name,osVersion:V.os.version,deviceName:V.browser.name,browserVersion:V.browser.version},H=function(){var e=navigator;return"object"==typeof e.connection?e.connection.downlink:""},x={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},z=function(){return new Promise(function(o){navigator.permissions&&navigator.permissions.query?navigator.permissions.query({name:"geolocation"}).then(function(e){"granted"===e.state&&navigator.geolocation&&navigator.geolocation.getCurrentPosition?navigator.geolocation.getCurrentPosition(function(e){var t=e.coords,n=t.latitude,r=t.longitude;o({lat:n,lon:r})},function(){return o({})},x):o({})}):o({})})},F=function(){return c(void 0,void 0,void 0,function(){var t;return l(this,function(e){return"function"==typeof(t=navigator).getBattery?[2,t.getBattery().then(function(e){return Math.round(100*e.level)})]:[2,-1]})})},U=function(){var e=navigator;return"object"==typeof e.connection?e.connection.effectiveType:""},B=(g=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent),/AppContainer/i.test(navigator.userAgent)?"h5":g?"mweb":"web"),J=function(){return c(void 0,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return t={},[4,z()];case 1:return t.location=e.sent(),[4,F()];case 2:return[2,i.apply(void 0,[i.apply(void 0,[(t.batteryPercentage=e.sent(),t.networkSpeed=H(),t.networkType=U(),t.pageURL=_(),t),D]),{timestamp:q(),deviceType:B}])]}})})},X={apiInProgress:0},Z={navigationStartTime:0,referrer:""},G=Z;function W(e){var r=this;this.saveLogs=function(e){var t=N(e);t&&(t.id=Math.random().toString(36).slice(2)||null);var n=A(E)||[];n.length<50||n.shift(),n.push(t),M(E,n),r.config.enableConsoleLogging&&console.log("%cHawkeye Event%O","color:white;  background: #012b72",t),G.navigationStartTime=0,G.referrer=""},this.config=e}var Y=(W.prototype.setConfig=function(e){this.config=e},W.prototype.addLog=function(n){return c(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return[4,function(n,r){return c(void 0,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return[4,J()];case 1:return t=e.sent(),[2,{appVersion:"2.0.0",appVersionCode:r.appVersionCode||"",categoryId:r.categoryId||"",batteryPercentage:t.batteryPercentage,errorCode:n.meta.errorCode||"",eventType:n.type,errorMsg:n.meta.errorMsg||"",flowName:r.flowName||n.meta.flowName||"",mid:r.mid||"",transactionId:r.transactionId||"",location:{lat:t.location.lat||"",lon:t.location.lon||""},webData:{browserName:t.deviceName,browserVersion:t.browserVersion,redirectionTime:n.meta.redirectionTime,dnsLookupTime:n.meta.dnsLookupTime,tcpHandshakeTime:n.meta.tcpHandshakeTime,timeToFirstByte:n.meta.timeToFirstByte,firstPaintTime:n.meta.firstPaintTime,pageLoadTime:n.meta.pageLoadTime,timeToInteractive:n.meta.timeToInteractive,url:n.meta.webUrl||t.pageURL,referrer:n.meta.referrer,navigationTime:n.meta.navigationTime,uuid:r.uuid},id:"",status:"",metricConnectionTime:"",metricDomainlookupTime:"",metricRequestTime:"",metricResponseTime:"",metricSecureConnectionTime:"",metricTotalTime:"",networkType:t.networkType,networkSpeed:t.networkSpeed,requestSize:n.meta.requestLength||"",requestMethod:n.meta.requestMethod||"",responseCode:void 0!==n.meta.status?n.meta.status:"",responseSize:n.meta.responseSize,responseTime:n.meta.responseTime||"",responseType:n.meta.responseType||"",screenName:r.screenName||n.meta.screenName||"",storageFreePercentage:"",timestamp:t.timestamp,uri:f(n.meta.url||""),userFacing:!0,verticalName:r.verticalName||"",customMessage:f(n.meta.message||n.meta.customMessage||""),customMessage1:f(n.meta.message1||n.meta.customMessage1||""),customMessage2:f(n.meta.message2||n.meta.customMessage2||""),customValue:f(n.meta.customValue||r.customValue||""),customValue1:f(n.meta.customValue1||r.customValue1||""),PID:n.meta.PID||r.PID,userId:r.userId||r.user&&r.user.id}]}})})}(n,this.config)];case 1:return t=e.sent(),(!this.config.shouldSendCallback||"function"==typeof this.config.shouldSendCallback&&this.config.shouldSendCallback(t))&&this.saveLogs(t),[2]}})})},W);function Q(e,t){void 0===t&&(t={}),this.type=e,this.meta=t}function K(e){return d(e).substring(0,1024)}function $(r,o){return c(void 0,void 0,void 0,function(){var t,n;return l(this,function(e){switch(e.label){case 0:return[4,J()];case 1:return t=e.sent(),(n=JSON.parse(JSON.stringify(r))).forEach(function(e){delete e.id,delete e.status}),[2,{clientId:"webapp",osType:t.osType,osVersion:t.osVersion,userId:o.userId||"",deviceType:t.deviceType,events:n}]}})})}var ee=(Q.prototype.add=function(e,t){this.meta[e]=t},Q);function te(o,i,a){return c(this,void 0,void 0,function(){var t,n,r;return l(this,function(e){switch(e.label){case 0:return[4,$(i,a)];case 1:return t=e.sent(),n={"Content-Type":"application/json","X-Public-Api-Key":function(e){switch(e){case k.PRODUCTION:return"d2ViLXByb2Q6YTM0MjJiYWYtMGFkMC00YjVjLTlhY2QtYjcxNjA4MmM0OGUzCg==";case k.STAGING:default:return"d2ViLXN0YWdpbmc6MjA4OTZhZTYtZTliMy00YzZiLTk0NDItZGQ0Yzg0NzU3MzBjCg=="}}(a.env)},r={method:"POST",headers:n,body:JSON.stringify(t),avoidFlag:!0},window.fetch(o,r).then(function(e){if(200<=e.status&&e.status<=305){var t=(A(E)||[]).filter(function(t){return!i.some(function(e){return e.id===t.id})});M(E,t)}}).catch(function(){var t=[],e=A(E)||[],n=e.filter(function(t){return!i.some(function(e){return e.id===t.id})});e.filter(function(t){return i.some(function(e){return e.id===t.id})}).forEach(function(e){e.status===T&&(delete e.status,t.push(e))}),M(E,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}(t,n))}),[2]}})})}function ne(e){if(e.env!==k.DEVELOPMENT&&document.readyState===C){var t=A(E)||[],n=[],r=function(e){var n=Date.now();return e.some(function(e){var t=new Date(new Date(e.timestamp));return 36e5<n-t.getTime()})}(t);if(t.forEach(function(e){!r&&e.status===T||(e.status=T,n.push(e))}),oe.apiInProgress<3&&n&&(3<n.length||r)){var o=function(e){return{userId:e.userId||"",env:e.env}}(e);M(E,t),te(function(e){return e===k.PRODUCTION?"https://hawkeye-api.paytm.com/appdebuganalytics/triggers/save":"https://hawkeye-staging-api.mypaytm.com/appdebuganalytics/triggers/save"}(e.env),n,o)}}}var re,oe=X;function ie(){var t=null!==re&&re.apply(this,arguments)||this;return t.initializeErrorEvent=function(){window.addEventListener("error",t.onError)},t.onError=function(e){window.requestIdleCallback(function(){t.config.logJSError&&t.handleError({errorMsg:K(e.message),message:K(e.error&&e.error.stack)})})},t}function ae(e){return/\.(css(\.map)?|js(\.map)?|jpg|jpeg|png|gif)(\?.*)?$/i.test(e)}var se,ue=(o(ie,re=Y),ie.prototype.handleError=function(n){return c(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return t=new ee(p,n),[4,this.addLog(t)];case 1:return e.sent(),this.sync(),[2]}})})},ie.prototype.start=function(){this.initializeErrorEvent()},ie.prototype.sync=function(){ne(this.config)},ie),ce=function(e){return 200<=e&&e<=305},le=function(e){var t={};if(e instanceof Headers)for(var n=e.keys(),r=n.next();r.value;)t[r.value]=e.get(r.value),r=n.next();else"object"==typeof e&&(t=e);return t},fe={trackStart:function(){return window.performance.now()},trackEnd:function(e){return Math.round(window.performance.now()-e)}},ge=X;function de(){var a=null!==se&&se.apply(this,arguments)||this;return a.getXHRRequestData=function(e){var t={};return t.url=e.url,t.method=e.requestMethod,t.status=e.status,t.json=e.responseBody,t.headers=e.resHeaders,t.responseTime=fe.trackEnd(e.startTime),t.responseType=-1<e.resHeaders.toLowerCase().indexOf("content-type: application/json")?S:j,t.requestLength=d(e.reqHeaders).length+d(e.body).length,t},a.handleXMLHttp=function(e,t){var n=e.currentTarget;if((!ce(n.status)||a.config.logApiRequests)&&(ce(n.status)||a.config.logApiErrors)){ge.apiInProgress-=1;var r=a.getXHRRequestData({url:t.__url,requestMethod:t.__requestMethod,responseBody:n.response,startTime:t.__startTime,reqHeaders:t.__headers,resHeaders:n.getAllResponseHeaders(),status:n.status,body:t.__body}),o=a.getAPILogData(r);a.sync(),ae(t.__url)||a.handleLogs(o,o.type)}},a.logAPIResponse=function(e,t,n,r){var o=!0;e.responseTime=fe.trackEnd(t);var i=a.getAPILogData(e);ge.apiInProgress-=1,n(e),(ce(e.status)&&!a.config.logApiRequests||!ce(e.status)&&!a.config.logApiErrors)&&(o=!1),o&&e.url&&!ae(e.url)&&!r&&a.handleLogs(i,i.type)},a.handleAPIResponse=function(s,u){return c(a,void 0,void 0,function(){var r,o,a;return l(this,function(e){switch(e.label){case 0:return r=u.avoidFlag,o=u.url,a=this,ge.apiInProgress+=1,[4,new Promise(function(t){var n=fe.trackStart(),i={url:o,requestLength:0};s.then(function(e){var t=e.clone();i.status=t.status;var n,r=d(u.headers).length,o=d(u.body).length;i.requestLength+=r+o,i.headers=le(t.headers),i.method=u.method,i.responseType=i.headers["content-type"].startsWith("application/json")?S:j;try{n=t.json()}catch(e){n=t.text()}return n}).then(function(e){i.json=e,a.logAPIResponse(i,n,t,r)}).catch(function(e){i.json=e,a.logAPIResponse(i,n,t,r)})})];case 1:return e.sent(),[2]}})})},a.getAPILogData=function(e){var t=i({},e);return t.status&&ce(t.status)?t.type=h:(t.type=m,t.errorCode=t.status,t.errorMsg=d(e.json)),t.responseSize=d(t.json).length+d(t.headers).length,t.responseCode=e.status,t.requestMethod=e.method||"GET",t},a.validateAPILog=function(e){var t={valid:!0,errors:[]};return e.trackId||(t.valid=!1,t.errors.push("trackId is missing")),e.request&&e.request.url||(t.valid=!1,t.errors.push("url is missing")),e.response&&e.response.statusCode||(t.valid=!1,t.errors.push("statusCode is missing")),t},a.formatLogData=function(e){var t,n=e.trackId,r=e.response,o=e.request,i=e.customMessage,a=e.customMessage1;return{url:o.url,method:o.method,status:r.statusCode,json:r.body,responseTime:n?fe.trackEnd(n):0,headers:le(r.headers),requestLength:d(o.headers).length+d(o.body).length,responseType:(t=r.headers,void 0===t&&(t={}),(t["content-type"]||t["Content-Type"]||"").toLowerCase().startsWith("application/json")?S:j),customMessage:K(i),customMessage1:K(a)}},a}var pe,me=(o(de,se=Y),de.prototype.initializeXMLHttpRequestInterceptor=function(){var r=window.XMLHttpRequest.prototype.open,n=window.XMLHttpRequest.prototype.setRequestHeader,t=window.XMLHttpRequest.prototype.send,o=this;window.XMLHttpRequest.prototype.setRequestHeader=function(e,t){this.__headers||(this.__headers={}),this.__headers[e]=t,n.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(e){ge.apiInProgress+=1,this.__body=e,t.apply(this,arguments)},window.XMLHttpRequest.prototype.open=function(e,t){var n=this;this.__url=t,this.__requestMethod=e,this.__startTime=fe.trackStart(),this.addEventListener("error",function(e){o.handleXMLHttp(e,n)}),this.addEventListener("load",function(e){o.handleXMLHttp(e,n)}),r.apply(this,arguments)}},de.prototype.initializeFetchInterceptor=function(){var n=window.fetch,r=this;window.fetch=function(){var e=n.apply(null,arguments),t={url:arguments[0],method:arguments[1]&&arguments[1].method,avoidFlag:arguments[1]&&arguments[1].avoidFlag};return r.handleAPIResponse(e,t),e}},de.prototype.handleLogs=function(n,r){var e=this;window.requestIdleCallback(function(){return c(e,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return t=new ee(r,n),[4,this.addLog(t)];case 1:return e.sent(),this.sync(),[2]}})})})},de.prototype.start=function(){this.initializeXMLHttpRequestInterceptor(),this.initializeFetchInterceptor()},de.prototype.logAPI=function(e){var t=this.validateAPILog(e);if(t.valid){var n=this.formatLogData(e),r=this.getAPILogData(n);return this.handleLogs(r,r.type),{success:!0}}return t},de.prototype.sync=function(){ne(this.config)},de);function he(){var o=null!==pe&&pe.apply(this,arguments)||this;return o.initializeListener=function(){window.addEventListener("unhandledrejection",function(r){window.requestIdleCallback(function(){if(o.config.logJSError){var e=r.reason,t=void 0,n=e;"object"==typeof e&&(n=e.stack?(t=e.stack,e.message):JSON.stringify(e)),o.handleError({errorMsg:K(n),message:K(t)})}})})},o}var ve,ye=(o(he,pe=Y),he.prototype.handleError=function(n){return c(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return t=new ee(w,n),[4,this.addLog(t)];case 1:return e.sent(),this.sync(),[2]}})})},he.prototype.start=function(){this.initializeListener()},he.prototype.sync=function(){ne(this.config)},he),be=function(e,t){return void 0===t&&(t=0),void 0!==e?Number(e.toFixed(t)):e};function we(){var c=null!==ve&&ve.apply(this,arguments)||this;return c.getPerformanceEntries=function(){var e=window.performance,t=e.getEntriesByType("navigation")[0];if(!t&&(t={},e.timing)){var n=e.timing,r=n.redirectEnd,o=n.domainLookupEnd,i=n.connectEnd,a=n.responseStart,s=n.domComplete,u=n.navigationStart,c=n.domInteractive;t.redirectEnd=0<r?r-u:0,t.domainLookupEnd=o-u,t.connectEnd=i-u,t.responseStart=a-u,t.domComplete=s-u,t.domInteractive=c-u}return t},c.syncPerformaceEvent=function(){window.performance?window.requestIdleCallback(function(){var e=c.getPerformanceEntries(),t=performance.getEntriesByType("paint");if(c.config.logPerformance){var n=be(e.redirectEnd),r=be(e.domainLookupEnd),o=be(e.connectEnd),i=be(e.responseStart),a=be(e.domComplete),s=be(e.domInteractive),u=void 0;t[0]&&(u=be(t[0].startTime)),c.handleError({redirectionTime:n,dnsLookupTime:r,tcpHandshakeTime:o,timeToFirstByte:i,firstPaintTime:u,pageLoadTime:a,timeToInteractive:s})}}):console.log("Performance timing isn't supported.")},c.initializeLogsEvent=function(){document.readyState===C?c.syncPerformaceEvent():window.addEventListener("load",function(){c.syncPerformaceEvent()})},c}var Pe=(o(we,ve=Y),we.prototype.handleError=function(n){return c(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return t=new ee(y,n),[4,this.addLog(t)];case 1:return e.sent(),this.sync(),[2]}})})},we.prototype.start=function(){this.initializeLogsEvent()},we.prototype.sync=function(){ne(this.config)},we);function Ie(e){this.config=i(i({},Ie.DEFAULT_CONFIG),e||{})}var Le,Te=(Object.defineProperty(Ie.prototype,"env",{get:function(){return this.config.env},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"appVersion",{get:function(){return this.config.appVersion},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"appVersionCode",{get:function(){return this.config.appVersionCode},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"mid",{get:function(){return this.config.mid},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"transactionId",{get:function(){return this.config.transactionId},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"logJSError",{get:function(){return this.config.logJSError},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"logAPIs",{get:function(){return this.config.logAPIs},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"logApiRequests",{get:function(){return this.config.logApiRequests},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"logPerformance",{get:function(){return this.config.logPerformance},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"logApiErrors",{get:function(){return this.config.logApiErrors},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"verticalName",{get:function(){return this.config.verticalName},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"screenName",{get:function(){return this.config.screenName},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"flowName",{get:function(){return this.config.flowName},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"shouldSendCallback",{get:function(){return this.config.shouldSendCallback},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"user",{get:function(){return this.config.user},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"userId",{get:function(){return this.config.userId||this.config.user&&this.config.user.id},enumerable:!0,configurable:!0}),Ie.prototype.getConfig=function(){return i({},this.config)},Object.defineProperty(Ie.prototype,"enableConsoleLogging",{get:function(){return this.config.enableConsoleLogging},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"uuid",{get:function(){return this.config.uuid},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"categoryId",{get:function(){return this.config.categoryId},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"PID",{get:function(){return this.config.PID},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"eventType",{get:function(){return this.config.eventType||""},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"customValue",{get:function(){return this.config.customValue},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.prototype,"customValue1",{get:function(){return this.config.customValue1},enumerable:!0,configurable:!0}),Ie.DEFAULT_CONFIG={logJSError:!0,logAPIs:!0,logApiRequests:!0,logPerformance:!0,logApiErrors:!0,logNetworkError:!0,enableConsoleLogging:!1,env:k.PRODUCTION,uuid:function(){if("function"!=typeof URL.createObjectURL)return Math.random();var e=URL.createObjectURL(new Blob),t=e.toString().split("/").reverse()[0];return URL.revokeObjectURL(e),t}()},Ie),ke=(n(1),n(2),Z);function Se(){var e=null!==Le&&Le.apply(this,arguments)||this;return e.validatePayload=function(e,t){var n={valid:!0,errors:[]};switch(e){case v:t.errorMsg||t.customMessage||(n.valid=!1,n.errors.push("Please send either errorMsg or customMessage"));break;case p:case P:case I:break;case L:0===ke.navigationStartTime&&(n.valid=!1,n.errors.push("Please log pageNavigationStart before logging pageNavigationEnd"));break;default:n.valid=!1,n.errors.push("Invalid Log Type")}return n},e.updatePayload=function(e,t){switch(e){case I:t.navigationStartTime=fe.trackStart(),ke.navigationStartTime=t.navigationStartTime,t.referrer=t.url||window.location.href;break;case L:t.url=t.url||window.location.href,t.navigationEndTime=fe.trackEnd(ke.navigationStartTime)}},e}function je(){var o=this;this.logAPI=Ee,this.log=Ee,this.init=function(){o.APILogger=new me(o.config),o.JSLogger=new ue(o.config),o.UnhandledPromiseRejectionLogger=new ye(o.config),o.PerformanceLogger=new Pe(o.config),o.customLogger=new Oe(o.config),o.logAPI=o.APILogger.logAPI.bind(o.APILogger),o.log=o.customLogger.log.bind(o.customLogger),o.config.logAPIs&&o.APILogger.start(),o.config.logJSError&&(o.JSLogger.start(),o.UnhandledPromiseRejectionLogger.start()),o.config.logPerformance&&o.PerformanceLogger.start(),function(t){document.readyState===C?ne(t):document.addEventListener("readystatechange",function(e){e.target.readyState===C&&ne(t)})}(o.config)},this.reinit=function(){o.APILogger.setConfig(o.config),o.JSLogger.setConfig(o.config),o.UnhandledPromiseRejectionLogger.setConfig(o.config),o.PerformanceLogger.setConfig(o.config),o.customLogger.setConfig(o.config)},this.configure=function(e,t){var n=new Te(e),r=o.validateConfig(n);if(!r.valid)throw new Error("Invalid Hawkeye Config: "+r.errors.join());o.setConfig(n),t?o.reinit():o.init()},this.reconfigure=function(e){if(o.config)if("object"==typeof e){var t=Object.assign(o.config.getConfig(),e);o.configure(t,!1)}else t=e(o.config.getConfig()),o.configure(t,!0)},this.validateConfig=function(t){var e={valid:!0,errors:[]};return Object.values(k).some(function(e){return e===t.env})||(e.valid=!1,e.errors.push("env not provided with acceptable value - Acceptable values: "+Object.values(k).join())),t.shouldSendCallback&&"function"!=typeof t.shouldSendCallback&&(e.valid=!1,e.errors.push("shouldSendCallback should be a function")),t.user&&console.warn("%cHawkeye Warning:%O","color:red;"," user config will be deprecated after hawkeye 1.9.0. You can provide userId instead. Please refer docs for updates - ","https://wiki.mypaytm.com/display/HAW/3.+Configurations"),e},this.setConfig=function(e){o.config=e},Object.assign(this,fe)}var Oe=(o(Se,Le=Y),Se.prototype.handleLog=function(r,o){return c(this,void 0,void 0,function(){var t,n;return l(this,function(e){switch(e.label){case 0:if(t={},!(n=this.validatePayload(r,o)).valid)return[3,3];switch(r){case v:case P:case p:t=new ee(r,{errorMsg:K(o.errorMsg),message:K(o.customMessage),message1:K(o.customMessage1)||"",message2:K(o.customMessage2)||"",customValue:o.customValue||"",customValue1:o.customValue1||"",errorCode:o.errorCode,PID:o.PID||"",flowName:o.flowName||"",screenName:o.screenName||""});break;case I:ke.referrer=o.referrer;break;case L:t=new ee(b,{navigationTime:o.navigationEndTime,webUrl:o.url,referrer:ke.referrer,flowName:o.flowName||""})}return 0<Object.keys(t).length?[4,this.addLog(t)]:[3,2];case 1:e.sent(),ne(this.config),e.label=2;case 2:return[3,4];case 3:return[2,n.errors];case 4:return[2,null]}})})},Se.prototype.log=function(t,n){var e=this;void 0===n&&(n={}),this.updatePayload(t,n),window.requestIdleCallback(function(){return c(e,void 0,void 0,function(){return l(this,function(e){return this.handleLog(t,n),[2]})})})},Se),Ee=Function.prototype;t.default=je}]);